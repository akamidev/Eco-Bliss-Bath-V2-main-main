# Projet Eco-Bliss-Bath V2## ğŸ¬ DÃ©monstration

[![DÃ©monstration Eco-Bliss-Bath](https://img.shields.io/badge/ğŸ“½ï¸%20Voir%20la%20DÃ©monstration-VidÃ©o%20Locale-4A90E2?style=for-the-badge&logo=video&logoColor=white)](./Cypress1024.mp4)

> **ğŸ¥ Cliquez sur le badge ci-dessus pour voir la dÃ©monstration complÃ¨te du projet**
> 
> La vidÃ©o prÃ©sente :
> - ğŸ³ DÃ©marrage de l'environnement Docker
> - ğŸ…°ï¸ Lancement du frontend Angular
> - ğŸ§ª ExÃ©cution des tests Cypress
> - ğŸ“Š GÃ©nÃ©ration des rapports Mochawesome
> - ğŸ”§ RÃ©solution de problÃ¨mes courants

*Alternative avec image de dÃ©monstration :*

[![DÃ©monstration du Projet](https://via.placeholder.com/800x400/4A90E2/ffffff?text=ğŸ¬+Cypress+Demo+â–¶ï¸)](./Cypress1024.mp4)

ğŸ“¹ **Fichier vidÃ©o :** `Cypress1024.mp4` (situÃ© Ã  la racine du projet)rrage Complet

![Angular](https://img.shields.io/badge/Angular-13.3-DD0031?style=for-the-badge&logo=angular&logoColor=white)
![TypeScript](https://img.shields.io/badge/TypeScript-4.6-3178C6?style=for-the-badge&logo=typescript&logoColor=white)
![Symfony](https://img.shields.io/badge/Symfony-API-000000?style=for-the-badge&logo=symfony&logoColor=white)
![PHP](https://img.shields.io/badge/PHP-7.4+-777BB4?style=for-the-badge&logo=php&logoColor=white)
![MariaDB](https://img.shields.io/badge/MariaDB-11.7-003545?style=for-the-badge&logo=mariadb&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white)

![Cypress](https://img.shields.io/badge/Cypress-14.5-17202C?style=for-the-badge&logo=cypress&logoColor=white)
![Mochawesome](https://img.shields.io/badge/Mochawesome-Reports-FF6B6B?style=for-the-badge&logo=javascript&logoColor=white)
![Node.js](https://img.shields.io/badge/Node.js-16%2B-339933?style=for-the-badge&logo=nodedotjs&logoColor=white)
![npm](https://img.shields.io/badge/npm-Package%20Manager-CB3837?style=for-the-badge&logo=npm&logoColor=white)
![Git](https://img.shields.io/badge/Git-Version%20Control-F05032?style=for-the-badge&logo=git&logoColor=white)
![Swagger](https://img.shields.io/badge/Swagger-API%20Doc-85EA2D?style=for-the-badge&logo=swagger&logoColor=black)

## ğŸ“‹ PrÃ©sentation du Projet

Ce projet constitue une plateforme de tests automatisÃ©s pour l'application e-commerce **Eco-Bliss-Bath**, spÃ©cialisÃ©e dans la vente de produits de bain Ã©cologiques. Il comprend une API backend dÃ©veloppÃ©e avec Symfony, une interface frontend Angular, une base de donnÃ©es MariaDB, et une suite complÃ¨te de tests automatisÃ©s avec Cypress.

### ğŸ¯ Objectifs du Projet
- Automatiser les tests fonctionnels critiques (connexion, panier, API)
- Effectuer des tests de rÃ©gression et de smoke testing
- GÃ©nÃ©rer des rapports de tests dÃ©taillÃ©s avec Mochawesome
- Valider la sÃ©curitÃ© avec des tests XSS

## ï¿½ DÃ©monstration

[![DÃ©monstration Eco-Bliss-Bath](https://img.shields.io/badge/ğŸ“½ï¸%20Voir%20la%20DÃ©monstration-YouTube-FF0000?style=for-the-badge&logo=youtube&logoColor=white)](https://youtu.be/VOTRE_VIDEO_ID)

> **ğŸ¥ Cliquez sur le badge ci-dessus pour voir la dÃ©monstration complÃ¨te du projet**
> 
> La vidÃ©o prÃ©sente :
> - ğŸ³ DÃ©marrage de l'environnement Docker
> - ğŸ…°ï¸ Lancement du frontend Angular
> - ğŸ§ª ExÃ©cution des tests Cypress
> - ğŸ“Š GÃ©nÃ©ration des rapports Mochawesome
> - ğŸ”§ RÃ©solution de problÃ¨mes courants

*Vous pouvez Ã©galement utiliser cette image de dÃ©monstration alternative :*

[![DÃ©monstration du Projet](https://via.placeholder.com/800x400/1e3a8a/ffffff?text=ğŸš€+Eco-Bliss-Bath+Demo+ğŸ“±)](https://youtu.be/VOTRE_VIDEO_ID)

## ï¿½ğŸ—ï¸ Architecture Technique

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Backend API   â”‚    â”‚   Base de       â”‚
â”‚   Angular 13    â”‚â—„â”€â”€â”€â”¤   Symfony       â”‚â—„â”€â”€â”€â”¤   DonnÃ©es       â”‚
â”‚   Port: 4200    â”‚    â”‚   Port: 8081    â”‚    â”‚   MariaDB       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                       â–²                       
         â”‚                       â”‚                       
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              
â”‚   Tests E2E     â”‚    â”‚   Documentation â”‚              
â”‚   Cypress       â”‚    â”‚   Swagger UI    â”‚              
â”‚   + Mochawesome â”‚    â”‚   Port: 8081    â”‚              
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              
```

## ğŸ› ï¸ PrÃ©requis SystÃ¨me

Avant de commencer, assurez-vous d'avoir installÃ© les outils suivants :

### PrÃ©requis Obligatoires
- **Docker Desktop** (version 4.0+)
- **Node.js** (version 16 ou 18 - **Ã©vitez la v21**)
- **npm** (version 8+)
- **Git** (version 2.0+)

### PrÃ©requis Optionnels
- **Angular CLI** global : `npm install -g @angular/cli`
- **Cypress** (sera installÃ© automatiquement)

### âš ï¸ Notes de CompatibilitÃ©
- **Node.js v21** n'est pas officiellement supportÃ©e par Angular 13
- Utilisez de prÃ©fÃ©rence **Node.js v16 ou v18 LTS**

## ğŸ“¦ Installation et Configuration

### 1. Clonage du Projet

```bash
git clone https://github.com/Natm777/Eco-Bliss-Bath-V2-main
cd Eco-Bliss-Bath-V2-main
```

### 2. DÃ©marrage de l'Infrastructure Backend

#### 2.1 Lancement des Services Docker

```bash
# Depuis la racine du projet
docker compose up -d
```

Cette commande lance :
- **Base de donnÃ©es MariaDB** : Conteneur `bliss-bath-bdd`
- **API Backend Symfony** : Conteneur `bliss-bath-symfony`

#### 2.2 VÃ©rification du DÃ©marrage

```bash
# VÃ©rifier l'Ã©tat des conteneurs
docker ps

# VÃ©rifier les logs en cas de problÃ¨me
docker logs bliss-bath-bdd
docker logs bliss-bath-symfony
```

**Services disponibles :**
- API Backend : `http://localhost:8081`
- Documentation Swagger : `http://localhost:8081/api/doc`
- Health Check API : `http://localhost:8081/api/health`

### 3. Configuration du Frontend Angular

#### 3.1 Installation des DÃ©pendances

```bash
cd frontend
npm install
```

#### 3.2 DÃ©marrage du Serveur de DÃ©veloppement

```bash
npm start
# ou
npm run start
```

Le frontend sera accessible sur : `http://localhost:4200`

**Note :** Si le port 4200 est occupÃ©, Angular proposera automatiquement un port alternatif.

### 4. Installation et Configuration de Cypress

#### 4.1 Installation depuis la Racine

```bash
# Retourner Ã  la racine du projet
cd ..

# Installer Cypress et les dÃ©pendances de test
npm install --save-dev cypress
npm install --save-dev mochawesome
```

#### 4.2 Configuration des Scripts de Test

Le fichier `package.json` contient les scripts suivants :

```json
{
  "scripts": {
    "test:mochawesome": "cypress run --reporter mochawesome --reporter-options \"reportDir=cypress/reports/mochawesome,overwrite=false,html=true,json=true\"",
    "test:headless": "cypress run",
    "test:open": "cypress open"
  }
}
```

## ğŸ§ª ExÃ©cution des Tests

### PrÃ©requis pour les Tests
**âš ï¸ Important :** Assurez-vous que tous les services sont dÃ©marrÃ©s avant d'exÃ©cuter les tests :
- âœ… Docker containers (API + BDD)
- âœ… Frontend Angular
- âœ… Port 4200 accessible

### 1. Tests en Mode Graphique (RecommandÃ© pour le DÃ©veloppement)

```bash
npx cypress open
```

Interface graphique permettant de :
- SÃ©lectionner et exÃ©cuter des tests individuels
- Observer l'exÃ©cution en temps rÃ©el
- DÃ©boguer les tests interactivement

### 2. Tests en Mode Ligne de Commande

#### 2.1 ExÃ©cution Standard

```bash
npx cypress run
```

#### 2.2 ExÃ©cution avec Rapport Mochawesome

```bash
# MÃ©thode recommandÃ©e
npm run test:mochawesome

# Ou directement avec npx
npx cypress run --reporter mochawesome --reporter-options "reportDir=cypress/reports/mochawesome,overwrite=false,html=true,json=true"
```

## ğŸ“Š Suites de Tests Disponibles

### Tests Fonctionnels Frontend
- **`1-login.cy.js`** : Tests de connexion utilisateur
- **`2-pannier.cy.js`** : Tests du panier d'achat
- **`3-smokeBoutonPannier.cy.js`** : Tests smoke du bouton panier
- **`4-smokeConnexion.cy.js`** : Tests smoke de connexion

### Tests de SÃ©curitÃ©
- **`5-testXss.cy.js`** : Tests de vulnÃ©rabilitÃ©s XSS

### Tests API Backend
- **`apiHealth.cy.js`** : Tests de santÃ© de l'API
- **`apiLogin.cy.js`** : Tests d'authentification API
- **`apiGetProducts.cy.js`** : Tests de rÃ©cupÃ©ration des produits
- **`apiGetOrders.cy.js`** : Tests de rÃ©cupÃ©ration des commandes
- **`apiGetReviews.cy.js`** : Tests de rÃ©cupÃ©ration des avis
- **`apiPostOrders.cy.js`** : Tests de crÃ©ation de commandes
- **`apiPutOrders.cy.js`** : Tests de modification de commandes
- **`apiDeleteOrders.cy.js`** : Tests de suppression de commandes
- **`apiChangeQuantity.cy.js`** : Tests de modification des quantitÃ©s
- **`apiPostRegister.cy.js`** : Tests d'inscription
- **`apiGetInformation.cy.js`** : Tests de rÃ©cupÃ©ration d'informations

## ğŸ“ˆ GÃ©nÃ©ration et Consultation des Rapports

### 1. Rapports Mochawesome

AprÃ¨s exÃ©cution des tests avec Mochawesome :

**Localisation des rapports :**
```
cypress/
â””â”€â”€ reports/
    â””â”€â”€ mochawesome/
        â”œâ”€â”€ mochawesome.html          # Rapport principal
        â”œâ”€â”€ mochawesome_*.html         # Rapports individuels
        â”œâ”€â”€ mochawesome_*.json         # DonnÃ©es JSON
        â””â”€â”€ assets/                    # Ressources CSS/JS
```

**Ouverture du rapport :**
```bash
# Windows
start cypress/reports/mochawesome/mochawesome.html

# MacOS
open cypress/reports/mochawesome/mochawesome.html

# Linux
xdg-open cypress/reports/mochawesome/mochawesome.html
```

### 2. Captures d'Ã‰cran et VidÃ©os

Les captures d'Ã©cran des Ã©checs sont automatiquement sauvegardÃ©es dans :
```
cypress/
â”œâ”€â”€ screenshots/           # Captures d'Ã©cran des Ã©checs
â””â”€â”€ videos/               # Enregistrements vidÃ©o (mode headless)
```

### 3. MÃ©triques des Rapports

Les rapports Mochawesome incluent :
- **Statistiques globales** : Nombre de tests, succÃ¨s, Ã©checs
- **DurÃ©e d'exÃ©cution** : Temps total et par test
- **Taux de rÃ©ussite** : Pourcentage de succÃ¨s
- **DÃ©tails des Ã©checs** : Messages d'erreur et stack traces
- **Captures d'Ã©cran** : Images des Ã©checs

## ğŸ”§ RÃ©solution des ProblÃ¨mes Courants

### ProblÃ¨me : Conteneurs Docker qui ne dÃ©marrent pas

```bash
# ArrÃªter tous les conteneurs
docker compose down

# Nettoyer les volumes (âš ï¸ supprime les donnÃ©es)
docker compose down -v

# RedÃ©marrer
docker compose up -d
```

### ProblÃ¨me : Port 4200 dÃ©jÃ  utilisÃ©

Angular proposera automatiquement un port alternatif. Acceptez la proposition ou libÃ©rez le port :

```bash
# Windows - Trouver le processus sur le port 4200
netstat -ano | findstr :4200

# Tuer le processus (remplacer PID par l'ID du processus)
taskkill /PID <PID> /F
```

### ProblÃ¨me : Tests Cypress qui Ã©chouent

1. **VÃ©rifiez que tous les services sont dÃ©marrÃ©s**
2. **VÃ©rifiez les URLs dans cypress.config.js**
3. **Consultez les logs des conteneurs Docker**
4. **VÃ©rifiez la connectivitÃ© rÃ©seau**

### ProblÃ¨me : Rapports Mochawesome non gÃ©nÃ©rÃ©s

```bash
# VÃ©rifiez l'installation de Mochawesome
npm list mochawesome

# RÃ©installez si nÃ©cessaire
npm install --save-dev mochawesome

# VÃ©rifiez les permissions d'Ã©criture sur le dossier cypress/reports
```

## ğŸŒ URLs de RÃ©fÃ©rence

| Service | URL | Description |
|---------|-----|-------------|
| Frontend Angular | `http://localhost:4200` | Interface utilisateur |
| API Backend | `http://localhost:8081` | API REST Symfony |
| Documentation Swagger | `http://localhost:8081/api/doc` | Documentation interactive API |
| Health Check | `http://localhost:8081/api/health` | Statut de l'API |

## ğŸ“š Documentation ComplÃ©mentaire

### Configuration Cypress

Le fichier `cypress.config.js` contient la configuration principale :

```javascript
module.exports = defineConfig({
  env: {
    apiUrl: "http://localhost:8081"
  },
  e2e: {
    baseUrl: "http://localhost:4200/",
  }
});
```

### Structure des Fixtures

```
cypress/fixtures/
â”œâ”€â”€ example.json          # DonnÃ©es d'exemple
â”œâ”€â”€ profile.json          # Profils utilisateur test
â””â”€â”€ users.json            # DonnÃ©es utilisateurs
```

### Commandes PersonnalisÃ©es

Le fichier `cypress/support/commands.js` contient des commandes rÃ©utilisables comme `checkAddToCartButtonFromProductIndex()`.

## ğŸš€ Workflow de DÃ©veloppement RecommandÃ©

1. **DÃ©marrage de l'environnement**
   ```bash
   docker compose up -d
   cd frontend && npm start
   ```

2. **DÃ©veloppement de tests**
   ```bash
   npx cypress open
   ```

3. **Validation complÃ¨te**
   ```bash
   npm run test:mochawesome
   ```

4. **Analyse des rÃ©sultats**
   - Consulter les rapports Mochawesome
   - Examiner les captures d'Ã©cran
   - Corriger les Ã©checs identifiÃ©s

## ğŸ“‹ Checklist de Validation

Avant de considÃ©rer l'environnement comme opÃ©rationnel :

- [ ] Conteneurs Docker dÃ©marrÃ©s et healthy
- [ ] Frontend Angular accessible sur port 4200 (ou alternatif)
- [ ] API Backend rÃ©pond sur `/api/health`
- [ ] Documentation Swagger accessible
- [ ] Tests Cypress s'exÃ©cutent sans erreur de configuration
- [ ] Rapports Mochawesome gÃ©nÃ©rÃ©s correctement

## ğŸ¤ Contribution et Support

Ce projet suit les bonnes pratiques de test et de documentation. Pour toute question ou amÃ©lioration :

1. Consultez d'abord cette documentation
2. VÃ©rifiez les logs des services
3. Examinez les rapports de tests existants
4. Proposez des amÃ©liorations via les issues GitHub

---

**DerniÃ¨re mise Ã  jour :** Juillet 2025  
**Version du projet :** 2.0  
**CompatibilitÃ© testÃ©e :** Windows 10/11, Node.js 16-18, Docker Desktop 4.0+
