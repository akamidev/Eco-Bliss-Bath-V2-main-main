# Projet Eco-Bliss-Bath V2

![Angular](https://img.shields.io/badge/Angular-13.3-DD0031?style=for-the-badge&logo=angular&logoColor=white)
![TypeScript](https://img.shields.io/badge/TypeScript-4.6-3178C6?style=for-the-badge&logo=typescript&logoColor=white)
![Symfony](https://img.shields.io/badge/Symfony-API-000000?style=for-the-badge&logo=symfony&logoColor=white)
![PHP](https://img.shields.io/badge/PHP-7.4+-777BB4?style=for-the-badge&logo=php&logoColor=white)
![MariaDB](https://img.shields.io/badge/MariaDB-11.7-003545?style=for-the-badge&logo=mariadb&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white)

![Cypress](https://img.shields.io/badge/Cypress-14.5-17202C?style=for-the-badge&logo=cypress&logoColor=white)
![Mochawesome](https://img.shields.io/badge/Mochawesome-Reports-FF6B6B?style=for-the-badge&logo=javascript&logoColor=white)
![Node.js](https://img.shields.io/badge/Node.js-16%2B-339933?style=for-the-badge&logo=nodedotjs&logoColor=white)
![npm](https://img.shields.io/badge/npm-Package%20Manager-CB3837?style=for-the-badge&logo=npm&logoColor=white)
![Git](https://img.shields.io/badge/Git-Version%20Control-F05032?style=for-the-badge&logo=git&logoColor=white)
![Swagger](https://img.shields.io/badge/Swagger-API%20Doc-85EA2D?style=for-the-badge&logo=swagger&logoColor=black)

## üèóÔ∏è Architecture Technique

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ    ‚îÇ   Backend API   ‚îÇ    ‚îÇ   Base de       ‚îÇ
‚îÇ   Angular 13    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§   Symfony       ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§   Donn√©es       ‚îÇ
‚îÇ   Port: 4200    ‚îÇ    ‚îÇ   Port: 8081    ‚îÇ    ‚îÇ   MariaDB       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚ñ≤                       ‚ñ≤                       
         ‚îÇ                       ‚îÇ                       
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              
‚îÇ   Tests E2E     ‚îÇ    ‚îÇ   Documentation ‚îÇ              
‚îÇ   Cypress       ‚îÇ    ‚îÇ   Swagger UI    ‚îÇ              
‚îÇ   + Mochawesome ‚îÇ    ‚îÇ   Port: 8081    ‚îÇ              
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              
```

## üìã √Ä Propos du Projet

Ce projet constitue une plateforme de tests automatis√©s pour l'application e-commerce **Eco-Bliss-Bath**, sp√©cialis√©e dans la vente de produits de bain √©cologiques. Il comprend une API backend d√©velopp√©e avec Symfony, une interface frontend Angular, une base de donn√©es MariaDB, et une suite compl√®te de tests automatis√©s avec Cypress.

### üéØ Objectifs du Projet
- Automatiser les tests fonctionnels critiques (connexion, panier, API)
- Effectuer des tests de r√©gression et de smoke testing
- G√©n√©rer des rapports de tests d√©taill√©s avec Mochawesome
- Valider la s√©curit√© avec des tests XSS

## üìã Checklist de Validation

Avant de consid√©rer l'environnement comme op√©rationnel :

- [ ] Conteneurs Docker d√©marr√©s et healthy
- [ ] Frontend Angular accessible sur port 4200 (ou alternatif)
- [ ] API Backend r√©pond sur `/api/health`
- [ ] Documentation Swagger accessible
- [ ] Tests Cypress s'ex√©cutent sans erreur de configuration
- [ ] Rapports Mochawesome g√©n√©r√©s correctement

## ü§ù Contribution et Support

Ce projet suit les bonnes pratiques de test et de documentation. Pour toute question ou am√©lioration :

1. Consultez d'abord cette documentation
2. V√©rifiez les logs des services
3. Examinez les rapports de tests existants
4. Proposez des am√©liorations via les issues GitHub

## üé¨ D√©monstration

> **üé• Cliquez sur l'image ci-dessus pour voir la d√©monstration compl√®te du projet**
> 
<a href="https://akamidev.github.io/Eco-Bliss-Bath-V2-main-main/" target="_blank">
  <img src="photo-eco-bliss.png" alt="Eco Bliss Bath Demo" width="600">
</a>

> La vid√©o pr√©sente :

> - üß™ L'ex√©cution des tests Cypress

## üìö Documentation Compl√©mentaire

### Configuration Cypress

Le fichier `cypress.config.js` contient la configuration principale :

```javascript
module.exports = defineConfig({
  env: {
    apiUrl: "http://localhost:8081"
  },
  e2e: {
    baseUrl: "http://localhost:4200/",
  }
});
```

### Structure des Fixtures

```
cypress/fixtures/
‚îú‚îÄ‚îÄ example.json          # Donn√©es d'exemple
‚îú‚îÄ‚îÄ profile.json          # Profils utilisateur test
‚îî‚îÄ‚îÄ users.json            # Donn√©es utilisateurs
```

### Commandes Personnalis√©es

Le fichier `cypress/support/commands.js` contient des commandes r√©utilisables comme `checkAddToCartButtonFromProductIndex()`.

## üß™ Ex√©cution des Tests

### Pr√©requis pour les Tests
**‚ö†Ô∏è Important :** Assurez-vous que tous les services sont d√©marr√©s avant d'ex√©cuter les tests :
- ‚úÖ Docker containers (API + BDD)
- ‚úÖ Frontend Angular
- ‚úÖ Port 4200 accessible

### 1. Tests en Mode Graphique (Recommand√© pour le D√©veloppement)

```bash
npx cypress open
```

Interface graphique permettant de :
- S√©lectionner et ex√©cuter des tests individuels
- Observer l'ex√©cution en temps r√©el
- D√©boguer les tests interactivement

### 2. Tests en Mode Ligne de Commande

#### 2.1 Ex√©cution Standard

```bash
npx cypress run
```

#### 2.2 Ex√©cution avec Rapport Mochawesome

```bash
# M√©thode recommand√©e
npm run test:mochawesome

# Ou directement avec npx
npx cypress run --reporter mochawesome --reporter-options "reportDir=cypress/reports/mochawesome,overwrite=false,html=true,json=true"
```

## üìà G√©n√©ration et Consultation des Rapports

### 1. Rapports Mochawesome

Apr√®s ex√©cution des tests avec Mochawesome :

**Localisation des rapports :**
```
cypress/
‚îî‚îÄ‚îÄ reports/
    ‚îî‚îÄ‚îÄ mochawesome/
        ‚îú‚îÄ‚îÄ mochawesome.html          # Rapport principal
        ‚îú‚îÄ‚îÄ mochawesome_*.html         # Rapports individuels
        ‚îú‚îÄ‚îÄ mochawesome_*.json         # Donn√©es JSON
        ‚îî‚îÄ‚îÄ assets/                    # Ressources CSS/JS
```

**Ouverture du rapport :**
```bash
# Windows
start cypress/reports/mochawesome/mochawesome.html

# MacOS
open cypress/reports/mochawesome/mochawesome.html

# Linux
xdg-open cypress/reports/mochawesome/mochawesome.html
```

### 2. Captures d'√âcran et Vid√©os

Les captures d'√©cran des √©checs sont automatiquement sauvegard√©es dans :
```
cypress/
‚îú‚îÄ‚îÄ screenshots/           # Captures d'√©cran des √©checs
‚îî‚îÄ‚îÄ videos/               # Enregistrements vid√©o (mode headless)
```

### 3. M√©triques des Rapports

Les rapports Mochawesome incluent :
- **Statistiques globales** : Nombre de tests, succ√®s, √©checs
- **Dur√©e d'ex√©cution** : Temps total et par test
- **Taux de r√©ussite** : Pourcentage de succ√®s
- **D√©tails des √©checs** : Messages d'erreur et stack traces
- **Captures d'√©cran** : Images des √©checs

## üì¶ Installation et Configuration

### 1. Clonage du Projet

```bash
git clone https://github.com/Natm777/Eco-Bliss-Bath-V2-main
cd Eco-Bliss-Bath-V2-main
```

### 2. D√©marrage de l'Infrastructure Backend

#### 2.1 Lancement des Services Docker

```bash
# Depuis la racine du projet
docker compose up -d
```

Cette commande lance :
- **Base de donn√©es MariaDB** : Conteneur `bliss-bath-bdd`
- **API Backend Symfony** : Conteneur `bliss-bath-symfony`

#### 2.2 V√©rification du D√©marrage

```bash
# V√©rifier l'√©tat des conteneurs
docker ps

# V√©rifier les logs en cas de probl√®me
docker logs bliss-bath-bdd
docker logs bliss-bath-symfony
```

**Services disponibles :**
- API Backend : `http://localhost:8081`
- Documentation Swagger : `http://localhost:8081/api/doc`
- Health Check API : `http://localhost:8081/api/health`

### 3. Configuration du Frontend Angular

#### 3.1 Installation des D√©pendances

```bash
cd frontend
npm install
```

#### 3.2 D√©marrage du Serveur de D√©veloppement

```bash
npm start
# ou
npm run start
```

Le frontend sera accessible sur : `http://localhost:4200`

**Note :** Si le port 4200 est occup√©, Angular proposera automatiquement un port alternatif.

### 4. Installation et Configuration de Cypress

#### 4.1 Installation depuis la Racine

```bash
# Retourner √† la racine du projet
cd ..

# Installer Cypress et les d√©pendances de test
npm install --save-dev cypress
npm install --save-dev mochawesome
```

#### 4.2 Configuration des Scripts de Test

Le fichier `package.json` contient les scripts suivants :

```json
{
  "scripts": {
    "test:mochawesome": "cypress run --reporter mochawesome --reporter-options \"reportDir=cypress/reports/mochawesome,overwrite=false,html=true,json=true\"",
    "test:headless": "cypress run",
    "test:open": "cypress open"
  }
}
```

## ÔøΩÔ∏è Pr√©requis Syst√®me

Avant de commencer, assurez-vous d'avoir install√© les outils suivants :

### Pr√©requis Obligatoires
- **Docker Desktop** (version 4.0+)
- **Node.js** (version 16 ou 18 - **√©vitez la v21**)
- **npm** (version 8+)
- **Git** (version 2.0+)

### Pr√©requis Optionnels
- **Angular CLI** global : `npm install -g @angular/cli`
- **Cypress** (sera install√© automatiquement)

### ‚ö†Ô∏è Notes de Compatibilit√©
- **Node.js v21** n'est pas officiellement support√©e par Angular 13
- Utilisez de pr√©f√©rence **Node.js v16 ou v18 LTS**

## üîß R√©solution des Probl√®mes Courants

### Probl√®me : Conteneurs Docker qui ne d√©marrent pas

```bash
# Arr√™ter tous les conteneurs
docker compose down

# Nettoyer les volumes (‚ö†Ô∏è supprime les donn√©es)
docker compose down -v

# Red√©marrer
docker compose up -d
```

### Probl√®me : Port 4200 d√©j√† utilis√©

Angular proposera automatiquement un port alternatif. Acceptez la proposition ou lib√©rez le port :

```bash
# Windows - Trouver le processus sur le port 4200
netstat -ano | findstr :4200

# Tuer le processus (remplacer PID par l'ID du processus)
taskkill /PID <PID> /F
```

### Probl√®me : Tests Cypress qui √©chouent

1. **V√©rifiez que tous les services sont d√©marr√©s**
2. **V√©rifiez les URLs dans cypress.config.js**
3. **Consultez les logs des conteneurs Docker**
4. **V√©rifiez la connectivit√© r√©seau**

### Probl√®me : Rapports Mochawesome non g√©n√©r√©s

```bash
# V√©rifiez l'installation de Mochawesome
npm list mochawesome

# R√©installez si n√©cessaire
npm install --save-dev mochawesome

# V√©rifiez les permissions d'√©criture sur le dossier cypress/reports
```

## üìä Suites de Tests Disponibles

### Tests Fonctionnels Frontend
- **`1-login.cy.js`** : Tests de connexion utilisateur
- **`2-pannier.cy.js`** : Tests du panier d'achat
- **`3-smokeBoutonPannier.cy.js`** : Tests smoke du bouton panier
- **`4-smokeConnexion.cy.js`** : Tests smoke de connexion

### Tests de S√©curit√©
- **`5-testXss.cy.js`** : Tests de vuln√©rabilit√©s XSS

### Tests API Backend
- **`apiHealth.cy.js`** : Tests de sant√© de l'API
- **`apiLogin.cy.js`** : Tests d'authentification API
- **`apiGetProducts.cy.js`** : Tests de r√©cup√©ration des produits
- **`apiGetOrders.cy.js`** : Tests de r√©cup√©ration des commandes
- **`apiGetReviews.cy.js`** : Tests de r√©cup√©ration des avis
- **`apiPostOrders.cy.js`** : Tests de cr√©ation de commandes
- **`apiPutOrders.cy.js`** : Tests de modification de commandes
- **`apiDeleteOrders.cy.js`** : Tests de suppression de commandes
- **`apiChangeQuantity.cy.js`** : Tests de modification des quantit√©s
- **`apiPostRegister.cy.js`** : Tests d'inscription
- **`apiGetInformation.cy.js`** : Tests de r√©cup√©ration d'informations

## üåê URLs de R√©f√©rence

| Service | URL | Description |
|---------|-----|-------------|
| Frontend Angular | `http://localhost:4200` | Interface utilisateur |
| API Backend | `http://localhost:8081` | API REST Symfony |
| Documentation Swagger | `http://localhost:8081/api/doc` | Documentation interactive API |
| Health Check | `http://localhost:8081/api/health` | Statut de l'API |

## üöÄ Workflow de D√©veloppement Recommand√©

1. **D√©marrage de l'environnement**
   ```bash
   docker compose up -d
   cd frontend && npm start
   ```

2. **D√©veloppement de tests**
   ```bash
   npx cypress open
   ```

3. **Validation compl√®te**
   ```bash
   npm run test:mochawesome
   ```

4. **Analyse des r√©sultats**
   - Consulter les rapports Mochawesome
   - Examiner les captures d'√©cran
   - Corriger les √©checs identifi√©s

---

**Derni√®re mise √† jour :** Juillet 2025  
**Version du projet :** 2.0  
**Compatibilit√© test√©e :** Windows 10/11, Node.js 16-18, Docker Desktop 4.0+
